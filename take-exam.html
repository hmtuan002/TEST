<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tham gia thi Văn học</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="css/style.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h1 class="text-3xl font-bold text-blue-800 mb-6">Tham gia thi Văn học</h1>
            
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Tham gia đề thi từ người khác -->
                <div class="bg-blue-50 p-6 rounded-lg">
                    <div class="text-center mb-6">
                        <i class="fas fa-users text-4xl text-blue-600 mb-4"></i>
                        <h2 class="text-xl font-bold text-gray-800 mb-2">Tham gia đề thi từ người khác</h2>
                        <p class="text-gray-600">Nhập link hoặc quét mã QR để tham gia đề thi</p>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Nhập link đề thi</label>
                            <input type="text" id="exam-link" class="w-full p-3 border rounded-lg" placeholder="https://...">
                        </div>
                        
                        <div class="text-center text-gray-500">hoặc</div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Quét mã QR</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                                <div id="qr-scanner" class="w-full h-64 bg-gray-100 flex items-center justify-center">
                                    <i class="fas fa-qrcode text-4xl text-gray-400"></i>
                                </div>
                                <button id="start-scan" class="btn-primary mt-4">
                                    <i class="fas fa-camera mr-2"></i> Bật camera quét QR
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <button id="join-exam" class="btn-primary w-full mt-6">
                        <i class="fas fa-sign-in-alt mr-2"></i> Tham gia thi
                    </button>
                </div>
                
                <!-- Tham gia đề thi AI -->
                <div class="bg-green-50 p-6 rounded-lg">
                    <div class="text-center mb-6">
                        <i class="fas fa-robot text-4xl text-green-600 mb-4"></i>
                        <h2 class="text-xl font-bold text-gray-800 mb-2">Tham gia đề thi AI</h2>
                        <p class="text-gray-600">Thi thử với đề thi do AI tạo và chấm điểm tự động</p>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Chọn chủ đề</label>
                            <select id="ai-topic" class="w-full p-3 border rounded-lg">
                                <option value="general">Văn học tổng hợp</option>
                                <option value="reading">Đọc hiểu văn bản</option>
                                <option value="social">Nghị luận xã hội</option>
                                <option value="literature">Nghị luận văn học</option>
                                <option value="poem">Thơ ca</option>
                                <option value="prose">Văn xuôi</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Thời gian làm bài (phút)</label>
                            <select id="ai-duration" class="w-full p-3 border rounded-lg">
                                <option value="60">60 phút</option>
                                <option value="90">90 phút</option>
                                <option value="120" selected>120 phút</option>
                                <option value="180">180 phút</option>
                            </select>
                        </div>
                    </div>
                    
                    <button id="start-ai-exam" class="btn-primary w-full mt-6">
                        <i class="fas fa-play mr-2"></i> Bắt đầu thi
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Màn hình nhập thông tin thí sinh -->
        <div id="student-info" class="bg-white rounded-xl shadow-lg p-6 hidden max-w-md mx-auto">
            <h2 class="text-2xl font-bold text-center text-blue-800 mb-6">Thông tin thí sinh</h2>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-gray-700 mb-2">Họ và tên</label>
                    <input type="text" id="student-name" class="w-full p-3 border rounded-lg">
                </div>
                
                <div>
                    <label class="block text-gray-700 mb-2">Email (tùy chọn)</label>
                    <input type="email" id="student-email" class="w-full p-3 border rounded-lg">
                </div>
                
                <div>
                    <label class="block text-gray-700 mb-2">Số điện thoại (tùy chọn)</label>
                    <input type="tel" id="student-phone" class="w-full p-3 border rounded-lg">
                </div>
            </div>
            
            <button id="start-exam" class="btn-primary w-full mt-6">
                <i class="fas fa-pen-fancy mr-2"></i> Bắt đầu làm bài
            </button>
        </div>
        
        <!-- Màn hình làm bài thi -->
        <div id="exam-screen" class="hidden">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 id="exam-title" class="text-xl font-bold text-gray-800"></h2>
                        <p id="exam-description" class="text-sm text-gray-600"></p>
                    </div>
                    <div class="bg-gray-100 px-4 py-2 rounded-lg">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-clock text-gray-600"></i>
                            <span id="exam-timer" class="font-bold">120:00</span>
                        </div>
                    </div>
                </div>
                
                <div id="exam-content" class="space-y-8">
                    <!-- Nội dung đề thi sẽ được hiển thị ở đây -->
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between">
                    <button id="save-exam" class="btn-secondary">
                        <i class="fas fa-save mr-2"></i> Lưu bài làm
                    </button>
                    <button id="submit-exam" class="btn-primary">
                        <i class="fas fa-paper-plane mr-2"></i> Nộp bài
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Màn hình kết quả thi -->
        <div id="result-screen" class="bg-white rounded-xl shadow-lg p-6 hidden max-w-2xl mx-auto">
            <div class="text-center mb-6">
                <div class="bg-blue-100 p-4 rounded-full inline-block mb-4">
                    <i class="fas fa-award text-4xl text-blue-600"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Kết quả bài thi</h2>
                <p id="result-message" class="text-gray-600"></p>
            </div>
            
            <div id="ai-result" class="space-y-6">
                <!-- Kết quả từ AI sẽ hiển thị ở đây -->
            </div>
            
            <div id="waiting-result" class="text-center py-8">
                <p class="text-gray-600 mb-4">Bài thi của bạn đã được nộp và đang chờ giáo viên chấm điểm.</p>
                <p class="text-gray-600">Kết quả sẽ được gửi đến email của bạn khi có.</p>
            </div>
            
            <button id="back-to-home" class="btn-primary w-full mt-6">
                <i class="fas fa-home mr-2"></i> Về trang chủ
            </button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- QR Code Scanner -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    
    <script src="js/firebase.js"></script>
    <script src="js/take-exam.js"></script>
</body>
</html>